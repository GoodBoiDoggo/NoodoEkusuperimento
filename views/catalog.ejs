
<head>
<link rel=icon href=pic/kariteun-logo.png>
	<% include ./genHead.ejs %>
	<title>
		Kariteun: Catalog
	</title>
	<script src="boi/catalogController.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body ng-app="app" ng-controller="catalogController as vm">
<div ng-show="!vm.showItem" class="container-fluid">
	<h1>CATALOG</h1>
	<input id="catalogSearch" type="text" class="form-control" ng-model="vm.searchParam" placeholder="Search product">
	<div class="itemsContainer">
		<div class="item" ng-repeat="item in vm.catalogItems | filter:vm.customFilter">
			<a class="item img-thumbnail" ng-click="vm.viewItem(item)">
				<img class="img-responsive" src="pic/{{item.imgname}}"><br>
				<p>
					<b>{{item.prodname}}</b><br>
					<i>{{item.prodtype}}</i><br>
					Php <span ng-show="item.salerate > 0"><del>{{item.prodprice}}</del> {{item.prodprice - (item.prodprice * item.salerate)}}</span>
						<span ng-show="item.salerate == 0">{{item.prodprice}}</span>
					<br>
					<span class="available{{item.isavailable}}">
						{{item.isavailable ? "AVAILABLE" : "OUT OF STOCK"}}
					</span>
					
				</p>
			</a>
			
		</div>
	</div>
</div>

<div ng-show="vm.showItem" class="container-fluid">
	<div class="row whitespace"></div>
	<div ng-show="vm.showItem" data-spy="affix">
	
		<button type="button" class="child btn btn-primary affixedButton" ng-click="vm.backToCatalog()">View Catalog</button>
		<button ng-style="vm.avStyle()" ng-show="vm.loggedIn" ng-disabled="!vm.itemData.isavailable" type="button" class="child btn btn-success affixedButton" ng-click="vm.addToCart(vm.itemData)">Add to Cart</button>
		<button ng-hide="vm.loggedIn" type="button" class="child btn btn-success affixedButton" ng-click="vm.gotoLogin()">Log in</button>
	
	</div>
	<div class="itemsContainer img-thumbnail">
	
		<h2>{{vm.itemData.prodname}}</h2>
		<br>
			<img class="img-responsive " src="pic/{{vm.itemData.imgname}}">
		<br>
		
	</div>
	<h3>Item Details
	
		<small class="available{{vm.itemData.isavailable}}">
			{{vm.itemData.isavailable ? "AVAILABLE" : "OUT OF STOCK"}}
		</small>
		
	</h3>	
	<span class="price">PHP </span>
	<span class="price" ng-show="vm.itemData.salerate > 0"><del>{{vm.itemData.prodprice}}</del> {{vm.itemData.prodprice - (vm.itemData.prodprice * vm.itemData.salerate)}}</span>
	<span class="price" ng-show="vm.itemData.salerate == 0">{{vm.itemData.prodprice}}</span>
	<br>
	{{vm.itemData.proddesc}}
	<h4>
		<b>Item rating:</b> <span class="rating">{{vm.itemData.rateavg}}</span> /5 <small> ({{vm.itemData.ratercount}} raters)</small>
	</h4>
	Tags: <br>
	<div id="tagContainer" class="container-fluid">
		<div class="tagDiv" ng-repeat="tag in vm.itemData.tags">
			<span class="tagSpan">{{tag}}</span>
		</div>
	</div>
	<br>
	<button ng-show="vm.itemData.reviews.length" type="button" class="btn" ng-click="vm.toggleReview()">{{vm.showHide}} reviews ({{vm.itemData.reviews.length}})</button>
	<span class="text-info" ng-hide="vm.itemData.reviews.length"> This item has no user reviews yet. Be the first one!</span>
	<div id="revHash" ng-hide="vm.hideReviews">
		<div>
			<div ng-repeat="review in vm.itemData.reviews" class="reviews container">
				<h4>Anonymous</h4>
				{{review}}
		</div>
	</div>
</div>

<div class="bottomCon container-fluid"></div>

</body>